<!DOCTYPE html>
<html>
<head><title>Test Minimal WebRTC</title></head>
<body>
<h1>Test Minimal WebRTC</h1>
<button id="startTest">Démarrer le Test</button>
<div id="log"></div>
<script>
document.getElementById('startTest').addEventListener('click', async () => {
    const config = {
        iceServers: [{
            urls: 'turn:legalshufflecam.ovh:3478?transport=udp',
            username: 'webrtc',
            credential: 'secret'
        }],
        iceTransportPolicy: 'relay'
    };
    const pc = new RTCPeerConnection(config);
    pc.onicecandidate = (event) => {
        if (event.candidate) {
            document.getElementById('log').innerHTML += `<p>Candidat ICE: ${event.candidate.candidate}</p>`;
        }
    };
    pc.oniceconnectionstatechange = () => {
        document.getElementById('log').innerHTML += `<p>État ICE: ${pc.iceConnectionState}</p>`;
    };
    const offer = await pc.createOffer();
    await pc.setLocalDescription(offer);
});
</script>
</body>
</html>
